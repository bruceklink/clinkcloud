<div class="page-header">
  <h1>Posts</h1>
</div>


client = Twitter::REST::Client.new do |config|
  config.consumer_key        = "1yJiMcR9Ug1J9tbZPQ3NCA"
  config.consumer_secret     = "YOUR_CONSUMER_SECRET"
  config.access_token        = "YOUR_ACCESS_TOKEN"
  config.access_token_secret = "YOUR_ACCESS_SECRET"
end


curl --get 'https://api.twitter.com/1.1/statuses/home_timeline.json' --header 'Authorization: OAuth oauth_consumer_key="1yJiMcR9Ug1J9tbZPQ3NCA", oauth_nonce="c3c4cff64b02f4ddf0c7de83f260d35f", oauth_signature="NySgjmhwY6duGGDNHfUUjyXKoFQ%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1386585050", oauth_token="97373933-8h9k4NOXovvE7ShPwzTS0lkyXtfckbU9CbF2w200y", oauth_version="1.0"' --verbose


+def collect_with_max_id(collection=[], max_id=nil, &block)
 +  response = yield max_id
 +  collection += response
 +  response.empty? ? collection.flatten : collect_with_max_id(collection, response.last.id - 1, &block)
 +end
 +
 +def fetch_all_tweets(user)
 +  collect_with_max_id do |max_id|
 +    options = {:count => 200, :include_rts => true}
 +    options[:max_id] = max_id unless max_id.nil?
 +    @client.user_timeline(user, options)
 +  end
 +end
 +
 +fetch_all_tweets("sferik")
 +```


<p><%= link_to 'Add a New Post', new_post_url, class: 'btn btn-primary' %></p>

<table class="table table-hover">
  <thead>
    <tr>
      <th>User</th>
      <th>Network</th>
      <th>Category</th>
      <th>Linked account</th>
      <th>Friend</th>
      <th>Post type</th>
      <th>Comment</th>
      <th>Link</th>
      <th>Time stamp</th>
      <th>Views</th>
      <th>Interactions</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @posts.each do |post| %>
      <tr>
        <td><%= post.user_id %></td>
        <td><%= post.network_id %></td>
        <td><%= post.category_id %></td>
        <td><%= post.linked_account_id %></td>
        <td><%= post.friend_id %></td>
        <td><%= post.post_type %></td>
        <td><%= post.comment %></td>
        <td><%= post.link %></td>
        <td><%= post.time_stamp %></td>
        <td><%= post.views %></td>
        <td><%= post.interactions %></td>
        <td><%= link_to '<i class="fa fa-search-plus"></i>'.html_safe, post_url(post), class: 'btn btn-primary' %></td>
        <td><%= link_to '<i class="fa fa-edit"></i>'.html_safe, edit_post_url(post), class: 'btn btn-warning' %></td>
        <td><%= link_to '<i class="fa fa-trash-o"></i>'.html_safe, post_url(post), method: 'delete', data: { confirm: "Do you really want to delete this post?" }, class: 'btn btn-danger' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

